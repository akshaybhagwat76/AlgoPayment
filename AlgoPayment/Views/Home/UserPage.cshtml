@using AlgoPayment.VideModel;
@{
    Layout = null;

    UserCredentials user = (UserCredentials)(Session["UserCredentials"]);
    if (user == null)
    {
        Response.Redirect("~/Home/Index");
        return;
    }
}
<!DOCTYPE HTML>
<html lang="zxx">
<head>
    <title>AFL Writing Services</title>
    <!-- Meta tag Keywords -->

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="keywords" content="Online Banking Responsive web template, Bootstrap Web Templates, Flat Web Templates, Android Compatible web template, Smartphone Compatible web template, free webdesigns for Nokia, Samsung, LG, SonyEricsson, Motorola web design" />
    <script type="application/x-javascript">
         addEventListener("load", function() { setTimeout(hideURLbar, 0); }, false);
        function hideURLbar(){ window.scrollTo(0,1); } </script>
    <!--// Meta tag Keywords -->
    <!-- css files -->
    <link href="~/Content/css/bootstrap.css" type="text/css" media="all" rel="stylesheet" />
    <link href="~/Content/css/style.css" rel="stylesheet" type="text/css" media="all" /> <!-- Style-CSS -->
    <link rel="stylesheet" href="~/Content/css/font-awesome.css"> <!-- Font-Awesome-Icons-CSS -->
    <link rel="stylesheet" href="~/Content/css/flexslider.css" type="text/css" media="all" /> <!-- Banner-Slider-CSS -->
    <!-- //css files -->
    <link rel="stylesheet" type="text/css" href="~/Content/css/demo.css" />
    <!-- online-fonts -->
    <link href="//fonts.googleapis.com/css?family=Dosis:200,300,400,500,600,700,800&amp;subset=latin-ext" rel="stylesheet">
    <link href="//fonts.googleapis.com/css?family=Ubuntu+Condensed&amp;subset=cyrillic,cyrillic-ext,greek,greek-ext,latin-ext" rel="stylesheet">
    <!-- //online-fonts -->
</head>
<body>

    <!-- navigation -->
    <div class="nav-links">
        <div class="header-w3l">
            <div class="container">
                <a class="navbar-brand" href="#"><h1><span>AFL Writing</span> Services</h1></a>
                <div class="call-w3l">
                    <a href="#register" class="scroll">
                        <img src="~/images/call.png">
                    </a>
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        <nav class="navbar navbar-inverse">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
            </div>
            <div class="collapse navbar-collapse" id="myNavbar">
                <div class="w3l-nav">
                    <ul class="nav navbar-nav link-effect">
                        <li class="active"><a href="#login" class="scroll">Home</a></li>
                        <li><a href="#about" class="scroll">About Us</a></li>
                        <li><a href="#services" class="scroll">Services</a></li>
                        <li><a href="#gallery" class="scroll">Gallery</a></li>
                        <li><a href="#contact" class="scroll">Contact Us</a></li>
                        <li><a href="#login" class="scroll">@user.emailid</a></li>

                    </ul>
                </div>
            </div>
        </nav>
        <div class="codecon_half">
            <div class="expSearchBox">
                <div class="expSearchFrom">
                    <input id="field" type="search" placeholder="Search here" />
                    <div class="close">
                        <span class="front"></span>
                        <span class="back"></span>
                    </div>
                </div>
            </div>
        </div>
        <div class="clearfix"></div>
    </div>
    <div class="mail" id="login">
        <div class="container">
            <h3 class="w3l-title"><span>Hi @user.Name </span>   </h3>


            <div class="mail-w3l-agile">

                <div class="col-md-6 col-sm-6 agileinfo_mail_grid_right">
                    <h3>Extend Validity</h3>
                    <form id="paymentForm">

                        <div class="wthree_contact_left_grid">
                            <label>Device ID</label>
                            <input type="text" min="5" @(Session["deviceID"] != null ? "disabled='disabled'" : "") value="@Session["deviceId"]" name="DeviceID" id="txtDeviceID" placeholder="Device ID" required="">
                            <label>Amount Payable</label><br /><br />
                            <input type="text" disabled value="750" name="Price" id="txtPrice" required="">
                            <input type="hidden" value="@Session["userId"]" id="txtCustomerID" name="CustomerID" />
                        </div>
                        <input type="button" id="btnPay" style=" margin-left: 9em;" class="w3l-cont scroll" value="Pay Now" />
                    </form>
                    <a class="w3l-cont scroll" id="btnLogout" href="/Home/Logout">Logout</a>
                </div>
                <div class="clearfix"> </div>
            </div>
        </div>
    </div>

    <!-- //navigation -->
    <!-- banner section -->
    <div class="banner-slider">
        <div class="container">
            <!--Slider-->
            <div class="callbacks_container">
                <ul class="rslides" id="slider3">
                    <li>
                        <div class="w3l_banner_info">
                            <h3>Amibroker Coding strategy in AFL</h3>
                            <p>One stop solution is to get your strategy developed in Amibroker and then integrate with Algo.</p>
                            <div class="agileits_w3layouts_more menu__item">
                                <a href="#" class="menu__link" data-toggle="modal" data-target="#myModal">Learn More</a>
                            </div>
                        </div>
                    </li>
                    <li>
                        <div class="w3l_banner_info">
                            <h3>Algo Software!</h3>
                            <p>Application to automate the entire trading process and executes multiple orders within micro seconds.</p>
                            <div class="agileits_w3layouts_more menu__item">
                                <a href="#" class="menu__link" data-toggle="modal" data-target="#myModal">Learn More</a>
                            </div>
                        </div>
                    </li>
                    <li>
                        <div class="w3l_banner_info">
                            <h3>Amibroker Coding strategy in AFL</h3>
                            <p>One stop solution is to get your strategy developed in Amibroker and then integrate with Algo.</p>
                            <div class="agileits_w3layouts_more menu__item">
                                <a href="#" class="menu__link" data-toggle="modal" data-target="#myModal">Learn More</a>
                            </div>
                        </div>
                    </li>
                    <li>
                        <div class="w3l_banner_info">
                            <h3>Algo Software!</h3>
                            <p>Application to automate the entire trading process and executes multiple orders within micro seconds.</p>
                            <div class="agileits_w3layouts_more menu__item">
                                <a href="#" class="menu__link" data-toggle="modal" data-target="#myModal">Learn More</a>
                            </div>
                        </div>
                    </li>
                </ul>
            </div>
            <!-- //Slider -->

        </div>
    </div>
    <!-- Modal1 -->
    <div class="modal fade" id="myModal" tabindex="-1" role="dialog">
        <div class="modal-dialog">
            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <img src="~/images/g7.jpg" alt=" " class="img-responsive">
                    <h5>Donec lobortis pharetra dolor</h5>
                    <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, rds which don't look even slightly believable..</p>
                </div>
            </div>
            <!-- //Modal content-->
        </div>
    </div>

    <!-- about -->
    <div class="about" id="about">
        <div class="container">
            <h3 class="w3l-title"><span>About</span> Us</h3>
            <div class="w3-agileits-about-grids">
                <div class="col-md-5 agile-about-right">
                    <img src="~/images/3.png" alt="" />
                </div>
                <div class="col-md-7 agile-about-left">
                    <p class="sub-p3">AmibrokerAlgo is a software development company to develop Application/Tools/Strategies. The purpose of this site is to help you in finding the team who can code your strategy in programming language (AFL) and also to backtest the outcome of your strategy, we can integrate your amibroker application with Algo Trading. </p>
                </div>
                <div class="clearfix"> </div>
            </div>
        </div>
    </div>
    <!-- //about -->
    <!-- wthree-slid -->
    <div class="wthree-slid">
        <div class="col-sm-12 col-xs-8 wthree-slid-right">
            <h4>Algo Software</h4>
            <p>

                Professional AFL programming services
                AmiBroker is one of the technical software used across the world and it is one of the best tool to create custom trading strategies, Signal Generation, Performing Technical analysis and testing your trading models. We use AFL Programming language to create Complex Custom Indicators, Trading Strategies, Trading Dashboard, Buy & Sell Signal Models, Algo Trading. If you have any trading strategy which you want to code into Amibroker AFL Programming Language or you want Algo trading then you can send us your query to implement the same.

                We need complete and detailed specifications of your indicator, scan, exploration or your trading system requirements. These details must be complete and comprehensive to avoid wasted time in understanding the details of your system. Hence every single element of trading logic must be specified in the e-mail.

                In the e-mail, kindly let us know how you intend to use the code. Understanding your work flow will help us understand your requirements more comfortably.

                We can code your requirements in AFL, which is generally quicker, cheaper and well written perfectly appropriate for the vast majority of requirements (more than 75% of trader’s code is AFL).

            </p>
            <a class="w3l-cont scroll" href="#contact">Contact Us</a>
        </div>

        <div class="clearfix"> </div>
    </div>
    <!-- wthree-slid -->
    <!-- services -->
    <div class="services" id="services">
        <div class="container">
            <h3 class="w3l-title"><span>Our</span> Services</h3>
            <div class="col-md-4 services-grids-1">

            </div>
            <div class="col-md-4 services-grids">
                <div class="wthree-services-grid">
                    <div class="wthree-services-icon">
                        <i class="fa fa-money" aria-hidden="true"></i>
                    </div>
                    <div class="wthree-services-info">
                        <h5>Algo Software Development </h5>
                        <div style="width: 537px;"><p>Algo/Robo software development and integration with Amibroker.</p></div>
                    </div>
                </div>
                <div class="wthree-services-grid w3l-agile">
                    <div class="wthree-services-icon">
                        <i class="fa fa-user" aria-hidden="true"></i>
                    </div>
                    <div class="wthree-services-info" style="width: 400px;">
                        <h5>Coding Strategy in Amibroker</h5>
                        <p>Writing AFL to code the custom strategy using indicators.</p>
                    </div>
                </div>

                <div class="clearfix"> </div>
            </div>
        </div>

        <div class="gallery" id="gallery">
            <div class="container">
                <h3 class="w3l-title"><span>Our</span> Gallery</h3>
                <div class="agile_gallery_grids w3-agile">
                    <ul class="clearfix demo">
                        <li>
                            <div class="gallery-grid1">
                                <img src="~/images/g1.jpg" alt=" " class="img-responsive" />
                                <div class="p-mask">
                                    <h4><span>Online</span> Banking</h4>
                                    <p>Neque porro quisquam est, qui dolorem ipsum.</p>
                                </div>
                            </div>
                        </li>
                        <li>
                            <div class="gallery-grid1">
                                <img src="~/images/g2.jpg" alt=" " class="img-responsive" />
                                <div class="p-mask">
                                    <h4><span>Online</span> Banking</h4>
                                    <p>Neque porro quisquam est, qui dolorem ipsum.</p>
                                </div>
                            </div>
                        </li>
                        <li>
                            <div class="gallery-grid1">
                                <img src="~/images/g9.jpg" alt=" " class="img-responsive" />
                                <div class="p-mask">
                                    <h4><span>Online</span> Banking</h4>
                                    <p>Neque porro quisquam est, qui dolorem ipsum.</p>
                                </div>
                            </div>
                        </li>

                    </ul>
                </div>
            </div>
        </div>
        <!--//gallery-->
        <!-- mail -->
        <div class="mail" id="contact">
            <div class="container">
                <h3 class="w3l-title"><span>Contact</span> Us</h3>
                <div class="mail-w3l-agile">
                    <div class="col-md-6 col-sm-6 contact-left-w3ls">
                        <div class="w3l-cont-mk">
                            <img src="~/images/img2.jpg">
                        </div>
                    </div>
                    <div class="col-md-6 col-sm-6 agileinfo_mail_grid_right">
                        <h3>Get In Touch</h3>
                        <form action="#" method="post">
                            <div class="wthree_contact_left_grid">
                                <input type="text" name="Name" placeholder="Name" required="">
                                <input type="email" name="Email" placeholder="Email" required="">
                                <input type="text" name="number" placeholder="Phone Number" required="">
                            </div>
                            <textarea name="Message" placeholder="Message......." required=""></textarea>
                            <input type="submit" value="Submit">
                        </form>
                    </div>
                    <div class="clearfix"> </div>
                </div>
            </div>
        </div>

        <!-- //mail -->
        <!-- footer -->
        <div class="footer-bot">
            <div class="container">
                <div class="logo2">
                    <h2><a href="#"><span>AFL Writing</span> Services</a></h2>

                </div>

                <div class="clearfix"></div>
            </div>
        </div>
        <div class="copy-right">
            <div class="agileinfo_social_icons">
                <ul class="agileits_social_list">
                    <li><a href="#" class="w3_agile_facebook"><i class="fa fa-facebook" aria-hidden="true"></i></a></li>
                    <li><a href="#" class="agile_twitter"><i class="fa fa-twitter" aria-hidden="true"></i></a></li>
                    <li><a href="#" class="w3_agile_dribble"><i class="fa fa-dribbble" aria-hidden="true"></i></a></li>
                    <li><a href="#" class="w3_agile_google"><i class="fa fa-google-plus" aria-hidden="true"></i></a></li>
                </ul>
            </div>
            <div class="container">
                <p>
                    &copy; @DateTime.Now.Year AFL Writing Services. All Rights Reserved | Design by  <a href="http://amibrokeralgo.in/Home/Index"> AFL Writing Services</a><br />
                    All the strategies built and delivered to you must be thoroughly checked by you before trading in live market, We will not be responsible for any kind of profit/loss occurred by using the AFL or Algo/Robo application.
                </p>
                @Html.Hidden("userInfo", Session["userInfo"])
            </div>
        </div>

        <div id="payu"></div>
        <!-- //footer -->
        <!-- js files -->
        <!-- js -->
        <script type="text/javascript" src="~/Scripts/js/jquery-2.1.4.min.js"></script>
        <script type="text/javascript" src="~/Scripts/js/bootstrap.js"></script> <!-- Necessary-JavaScript-File-For-Bootstrap -->
        <!-- //js -->
        <!-- js for banner -->
        <!-- responsiveslider -->
        <script src="~/Scripts/js/responsiveslides.min.js"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/2.0.1/css/toastr.css" rel="stylesheet" />
        <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/2.0.1/js/toastr.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jsSHA/2.4.2/sha.js"></script>
        <script>
            var OAUTHURL = 'https://accounts.google.com/o/oauth2/auth?';
            var VALIDURL = 'https://www.googleapis.com/oauth2/v1/tokeninfo?access_token=';
            var SCOPE = 'https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email';
            var CLIENTID = '86201031936-1r9ffffl00uordtuks8detelnfi3fkq5.apps.googleusercontent.com';
            var REDIRECT = window.location.origin;
            var LOGOUT = window.location.href;
            var TYPE = 'token';
            var _url = OAUTHURL + 'scope=' + SCOPE + '&client_id=' + CLIENTID + '&redirect_uri=' + REDIRECT + '&response_type=' + TYPE;
            var acToken;
            var tokenType;
            var expiresIn;
            var user;
            var loggedIn = false;
            var fullaccess_token;
            var window = null;
        </script>
        <script>
            var loadScript = function (path) {
                var result = $.Deferred(),
                    script = document.createElement("script");

                script.async = "async";
                script.type = "text/javascript";
                script.src = path;
                script.onload = script.onreadystatechange = function (_, isAbort) {
                    if (!script.readyState || /loaded|complete/.test(script.readyState)) {
                        if (isAbort)
                            result.reject();
                        else
                            result.resolve();
                    }
                };

                script.onerror = function () {
                    result.reject();
                };

                $("head")[0].appendChild(script);

                return result.promise();
            }

            loadScript('https://checkout.razorpay.com/v1/checkout.js').then(function () {
                var deviceId = $("#txtDeviceID").val();
                window.r = new Razorpay({
                    key: 'rzp_test_4eINMyNiQesjcj',
                    protocol: 'https',
                    hostname: 'api.razorpay.com',
                    amount: '750',
                    name: '@user.Name',
                    description: $("#txtDeviceID").val(),
                    prefill: {
                        name: '@user.Name',
                        email:  '@user.emailid',
                        contact:  '@user.Mobile'
                    },
                    handler: function (transaction) {
                        $.get('/Return/HandleRazorPay?deviceId=' + $("#txtDeviceID").val(), function (data) {
                            if (data != null) {
                                if (data.status == "Failed") {
                                    location.href = '/Return/Fail';
                                }
                                else {
                                    location.href = '/Return/Success';
                                }
                            }
                        });
                    }
                });

            });


            $("#btnLogout").click(function () {
                $.get('/Home/Logout', function (data) {
                    if (data == "Cleared") {
                        location.href = "/Home/Index";
                    }
                });
            });
             function getRandomInt() {
                  return Math.floor(100000 + Math.random() * 900000);
             }

            $("#btnPay").click(function () {



                if ($("#txtDeviceID").val() == null || $("#txtDeviceID").val() == '') {
                    toastr.error('Device id required');
                    return;
                }

                var key = '@System.Configuration.ConfigurationManager.AppSettings["PaymentOption"].ToString()';
                if (key === "PayUMoney") {

                    var user = JSON.parse($("#userInfo").val());

                    var merchantKey = '@System.Configuration.ConfigurationManager.AppSettings["key"]';
                    var uid = getRandomInt();
                    var totalPrice = '750';
                    var productInfo = $("#txtDeviceID").val();
                    var recipient_name = user.Name + ',' + user.Id;
                    var email = user.emailid;
                    var merchantSalt = '@System.Configuration.ConfigurationManager.AppSettings["SALT"]';
                    var hashString = merchantKey + '|' + uid + '|' + totalPrice + '|' + productInfo + '|' + recipient_name + '|' + email + '|||||||||||' + merchantSalt;
                    var shaObj = new jsSHA("SHA-512", "TEXT");
                    shaObj.update(hashString);
                    var hash = shaObj.getHash("HEX");

                    var key1 = $('<input></input>').attr('type', 'hidden').attr('name', "key").val(merchantKey);
                    var key2 = $('<input></input>').attr('type', 'hidden').attr('name', "txnid").val(uid);

                    var key3 = $('<input></input>').attr('type', 'hidden').attr('name', "amount").val(totalPrice);

                    var key4 = $('<input></input>').attr('type', 'hidden').attr('name', "productinfo").val(productInfo);

                    var key5 = $('<input></input>').attr('type', 'hidden').attr('name', "firstname").val(recipient_name);

                    var key6 = $('<input></input>').attr('type', 'hidden').attr('name', "email").val(email);

                    var key7 = $('<input></input>').attr('type', 'hidden').attr('name', "phone").val(user.Mobile);

                    var key8 = $('<input></input>').attr('type', 'hidden').attr('name', "surl").val(window.location.origin + '/Return/Return');

                    var key9 = $('<input></input>').attr('type', 'hidden').attr('name', "furl").val(window.location.origin + '/Return/Return');

                    var key10 = $('<input></input>').attr('type', 'hidden').attr('name', "hash").val(hash);

                    var key11 = $('<input></input>').attr('type', 'hidden').attr('name', "service_provider").val();


                    var form = $('<form/></form>');

                    form.attr("id", "payuform");

                    form.attr("action", '@System.Configuration.ConfigurationManager.AppSettings["PAYU_BASE_URL"]');

                    form.attr("method", "POST");

                    form.attr("style", "display:none;");

                    form.append(key1, key2, key3, key4, key5, key6, key7, key8, key9, key10, key11);

                    $("body").append(form);
                    form.submit();
                }
                else {
                    r.open();
                }
            });
            // You can also use "$(window).load(function() {"
            $(function () {
                toastr.options.timeOut = 1500; // 1.5s
                // Slideshow 4
                $("#slider3").responsiveSlides({
                    auto: true,
                    pager: true,
                    nav: false,
                    speed: 500,
                    namespace: "callbacks",
                    before: function () {
                        $('.events').append("<li>before event fired.</li>");
                    },
                    after: function () {
                        $('.events').append("<li>after event fired.</li>");
                    }
                });

            });

        </script>
        <!-- //responsiveslider -->
        <!-- stats -->
        <script type="text/javascript" src="~/Scripts/js/numscroller-1.0.js"></script>
        <!-- //stats -->
        <!-- /js for banner -->
        <!-- start-smoth-scrolling -->
        <script type="text/javascript" src="~/Scripts/js/move-top.js"></script>
        <script type="text/javascript" src="~/Scripts/js/easing.js"></script>
        <script type="text/javascript">
            jQuery(document).ready(function ($) {
                $(".scroll").click(function (event) {
                    event.preventDefault();
                    $('html,body').animate({ scrollTop: $(this.hash).offset().top }, 1000);
                });
            });
        </script>
        <!-- start-smoth-scrolling -->
        <!-- smooth scrolling -->
        <script src="~/Scripts/js/SmoothScroll.min.js"></script>
        <!-- //smooth scrolling -->
        <!-- smooth-scrolling-of-move-up -->
        <script type="text/javascript">
            $(document).ready(function () {
                /*
                var defaults = {
                    containerID: 'toTop', // fading element id
                    containerHoverID: 'toTopHover', // fading element hover id
                    scrollSpeed: 1200,
                    easingType: 'linear'
                };
                */

                $().UItoTop({ easingType: 'easeOutQuart' });

            });
        </script>
        <!-- //smooth-scrolling-of-move-up -->
        <!-- video-js -->
        <script src="~/Scripts/js/jquery.vide.min.js"></script>
        <!-- //video-js -->
        <!--gallery-js -->
        <script src="~/Scripts/js/jquery.picEyes.js"></script>
        <script>
            $(function () {
                //picturesEyes($('.demo li'));
                $('.demo li').picEyes();
            });
        </script>
        <!--//gallery-js -->
        <!-- //js files -->


    </div>
</body>
</html>